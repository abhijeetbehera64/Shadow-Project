pipeline {
    agent any
    stages {
        stage ('Build') {
                steps {
                    script {
                        bat 'cd VehicleManagement && dotnet build'
                    }
                }
            }
stage('Static Code Analysis') {
	            steps {
		             script{
			                def scannerHome = tool name: 'sonarcloud', type: 'hudson.plugins.sonar.SonarRunnerInstallation'
	                    withSonarQubeEnv('sonarQube') {
	                        bat """
	                        C:\\ProgramData\\Jenkins\\.jenkins\\tools\\hudson.plugins.sonar.SonarRunnerInstallation\\sonarcloud\\bin\\sonar-scanner\
	                 -Dsonar.projectKey=polaris_polaris-vehicle-management\
	                 -Dsonar.sources=VehicleManagement//Vehicle_Management\
	                 -Dsonar.organization=polaris\
	                 -Dsonar.login=1ead1e8b933715de88ea3b93a369ec165175395a\
	                 """
                    }
		}
	    }
        }
        }
    }
